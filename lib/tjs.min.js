(function(h){"object"===typeof module&&module.exports?module.exports=h():window.tjs=h()})(function(){function h(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`/g,"&#96;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}return function(b,e){b=b||"";e=e||{};var k=e.open||"<%";e=e.close||"%>";for(var m=k.length,n=e.length,d=b.length,c=0,a=0,g="",f=!1;a<=d;){if(f){if("//"===b.substring(a,a+2)){a=b.indexOf("\n",a);a=~a?a+1:d;continue}if("/*"===b.substring(a,a+2)){a=b.indexOf("*/",a+2);a=~a?a+2:d;continue}if("/"===b.charAt(a)){for(;~(a=b.indexOf("/",a+1))&&"\\"===b.charAt(a-1););a=~a?a+1:d;continue}if("'"===b.charAt(a)){for(;~(a=b.indexOf("'",a+1))&&"\\"===b.charAt(a-1););a=~a?a+1:d;continue}if('"'===b.charAt(a)){for(;~(a=b.indexOf('"',a+1))&&"\\"===b.charAt(a-1););a=~a?a+1:d;continue}if("`"===b.charAt(a)){for(;~(a=b.indexOf("`",a+1))&&"\\"===b.charAt(a-1););a=~a?a+1:d;continue}if(b.indexOf(e,a)===a||a===d){f=b.charAt(c);if("="===f||"-"===f){if(c=b.substring(c+1,a).trim())g+="="===f?"_res.push(_encodeHTML("+c+"));\n":"_res.push("+c+");\n"}else g+=b.substring(c,a)+"\n";c=a+=n;f=!1;continue}}else if(b.indexOf(k,a)===a||a===d){c<a&&(g+='_res.push("'+String(b.substring(c,a)).replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")+'");\n');c=a+=m;f=!0;continue}a++}var l=new Function("data","_encodeHTML",g?"var _res = [];\nwith (data || {}) {\n"+g+'}\nreturn _res.join("");':'return "";');b=function(a){return l(a,h)};return b.body=l,b}});