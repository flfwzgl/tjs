/**
 * created by flfwzgl
 * github.com/flfwzgl/tjs
 */

;(function(a){if(typeof module==="object"&&module.exports){module.exports=a()}else{window.tjs=a()}})(function(){function b(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`/g,"&#96;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}function c(d){return String(d).replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}return function a(s,f){s=s||"";f=f||{};var o=f.open||"<%",v=f.close||"%>",t=o.length,g=v.length,q=s.length,h=/(^|[+\-*%^~!?&|:[=(;\n,])\s*$/,k=0;var n=0,l=0,p="",u=false,d,m;while(l<=q){if(!u){if(s.indexOf(o,l)===l||l===q){if(n<l){p+='_res.push("'+c(s.substring(n,l))+'");\n'}k=n=l+=t;u=true;continue}}else{if(s.charAt(l)==="\n"){k=l}if(s.substring(l,l+2)==="//"){l=s.indexOf("\n",l);l=~l?l+1:q;continue}if(s.substring(l,l+2)==="/*"){l=s.indexOf("*/",l+2);l=~l?l+2:q;continue}if(s.charAt(l)==="/"){if(h.test(s.substring(k,l))){while(~(l=s.indexOf("/",l+1))){if(s.charAt(l-1)!=="\\"){break}}l=~l?l+1:q;continue}}if(s.charAt(l)==="'"){while(~(l=s.indexOf("'",l+1))){if(s.charAt(l-1)!=="\\"){break}}l=~l?l+1:q;continue}if(s.charAt(l)==='"'){while(~(l=s.indexOf('"',l+1))){if(s.charAt(l-1)!=="\\"){break}}l=~l?l+1:q;continue}if(s.charAt(l)==="`"){while(~(l=s.indexOf("`",l+1))){if(s.charAt(l-1)!=="\\"){break}}l=~l?l+1:q;continue}if(s.indexOf(v,l)===l||l===q){d=s.charAt(n);if(d==="="||d==="-"){if(m=s.substring(n+1,l).trim()){p+=d==="="?"_res.push(_encodeHTML("+m+"));\n":"_res.push("+m+");\n"}}else{p+=s.substring(n,l)+"\n"}n=l+=g;u=false;continue}}l++}p=p?"var _res = [];\n"+"with (data || {}) {\n"+p+"}\n"+'return _res.join("");':'return "";';var r=new Function("data","_encodeHTML",p);var e=function(i){return r(i,b)};return e.body=p,e}});